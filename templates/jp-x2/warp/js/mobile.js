/* Copyright (C) YOOtheme GmbH, http://www.gnu.org/licenses/gpl.html GNU/GPL */

jQuery(function(i){var n={};n.nav={nav:null,storage:null,init:function(n){var s=this;this.nav=i("nav:first").hide(),this.storage=i("#m-navigation-storage"),i(n).bind("click",function(){s.nav.is(":visible")?s.hide():s.show()}),this.nav.find(".m-close").bind("click",function(){s.hide()})},show:function(){scrollTo(0,0),this.buildMenu(this.storage.find("ul.menu-mobile:first")),this.nav.show().addClass("fade in")},hide:function(){this.nav.hide()},buildMenu:function(n){var s=this,o=i("<ul />");n.parent().is("li")&&i("<li />").addClass("goback").html('<span class="button back">Back</span>').bind("click",function(){s.buildMenu(n.parent().parent())}).appendTo(o),n.children().each(function(){var n=i(this),t=n.find("ul:first"),a=i("<li />"),c=n.find("> a, > span");c.clone().appendTo(a).bind("click",function(n){i(this).is("a")&&n.stopPropagation()}),t.length&&a.addClass("parent").bind("click",function(){s.buildMenu(t)}),o.append(a)}),i("#m-navigation").children().remove(),i("#m-navigation").append(o),o.css("opacity",1).show()}},n.login={login:null,init:function(n){var s=this;this.login=i("#m-login").hide(),i(n).bind("click",function(){s.login.is(":visible")?s.hide():s.show()}),this.login.find(".m-close").bind("click",function(){s.hide()})},show:function(){scrollTo(0,0),this.login.show().addClass("fade in")},hide:function(){this.login.hide()}},n.search={search:null,init:function(n){var s=this;this.search=i("#m-search").hide(),i(n).bind("click",function(){s.search.is(":visible")?s.hide():s.show()}),this.search.find(".m-close").bind("click",function(){s.hide()})},show:function(){scrollTo(0,0),this.search.show().addClass("fade in")},hide:function(){this.search.hide()}},i("body").hasClass("mobile")?i("#m-toolbar [data-button]").each(function(){n[i(this).data("button")].init(this)}):i('<a href="?mobile=1">Switch to Mobile Version</a>').addClass("mobile-switcher").appendTo(i("body"))});